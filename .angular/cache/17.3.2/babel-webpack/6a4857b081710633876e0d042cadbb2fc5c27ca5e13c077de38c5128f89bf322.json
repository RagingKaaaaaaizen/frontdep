{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { first } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../_services\";\nimport * as i4 from \"@angular/common\";\nconst _c0 = a0 => ({\n  \"is-invalid\": a0\n});\nfunction PCAddEditComponent_div_11_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Name is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PCAddEditComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtemplate(1, PCAddEditComponent_div_11_div_1_Template, 2, 0, \"div\", 27);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.f.name.errors.required);\n  }\n}\nfunction PCAddEditComponent_option_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", category_r2.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", category_r2.name, \" \");\n  }\n}\nfunction PCAddEditComponent_div_24_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Category is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PCAddEditComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtemplate(1, PCAddEditComponent_div_24_div_1_Template, 2, 0, \"div\", 27);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.f.categoryId.errors.required);\n  }\n}\nfunction PCAddEditComponent_option_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r3.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" \", item_r3.name, \" (\", (item_r3.brand == null ? null : item_r3.brand.name) || \"No Brand\", \") \");\n  }\n}\nfunction PCAddEditComponent_div_32_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Item is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PCAddEditComponent_div_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtemplate(1, PCAddEditComponent_div_32_div_1_Template, 2, 0, \"div\", 27);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.f.itemId.errors.required);\n  }\n}\nfunction PCAddEditComponent_div_37_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Quantity is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PCAddEditComponent_div_37_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Quantity must be at least 1\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PCAddEditComponent_div_37_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Quantity cannot exceed available stock\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PCAddEditComponent_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtemplate(1, PCAddEditComponent_div_37_div_1_Template, 2, 0, \"div\", 27)(2, PCAddEditComponent_div_37_div_2_Template, 2, 0, \"div\", 27)(3, PCAddEditComponent_div_37_div_3_Template, 2, 0, \"div\", 27);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.f.quantity.errors.required);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.f.quantity.errors.min);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.f.quantity.errors.max);\n  }\n}\nfunction PCAddEditComponent_small_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 29);\n    i0.ɵɵtext(1, \" Available Stock: \");\n    i0.ɵɵelementStart(2, \"span\", 30);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.availableStock);\n  }\n}\nfunction PCAddEditComponent_div_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"div\", 31)(3, \"div\", 32)(4, \"h6\", 33);\n    i0.ɵɵelement(5, \"i\", 34);\n    i0.ɵɵtext(6, \" Stock Information \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 1)(8, \"div\", 35)(9, \"strong\");\n    i0.ɵɵtext(10, \"Available:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 35)(13, \"strong\");\n    i0.ɵɵtext(14, \"In Use:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\", 35)(17, \"strong\");\n    i0.ɵɵtext(18, \"Total:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\", 35)(21, \"strong\");\n    i0.ɵɵtext(22, \"After Deduction:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(23);\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(11);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.availableStock, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.inUseCount, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.totalStock, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.availableStock - (ctx_r0.form.get(\"quantity\").value || 0), \" \");\n  }\n}\nfunction PCAddEditComponent_option_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const location_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", location_r4.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", location_r4.name, \" \");\n  }\n}\nfunction PCAddEditComponent_div_48_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Room Location is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PCAddEditComponent_div_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtemplate(1, PCAddEditComponent_div_48_div_1_Template, 2, 0, \"div\", 27);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.f.roomLocationId.errors.required);\n  }\n}\nfunction PCAddEditComponent_div_61_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Status is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PCAddEditComponent_div_61_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtemplate(1, PCAddEditComponent_div_61_div_1_Template, 2, 0, \"div\", 27);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.f.status.errors.required);\n  }\n}\nfunction PCAddEditComponent_div_67_div_5_input_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"input\", 42);\n  }\n  if (rf & 2) {\n    const field_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"formControlName\", field_r5.name);\n  }\n}\nfunction PCAddEditComponent_div_67_div_5_textarea_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"textarea\", 43);\n  }\n  if (rf & 2) {\n    const field_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"formControlName\", field_r5.name);\n  }\n}\nfunction PCAddEditComponent_div_67_div_5_input_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"input\", 44);\n  }\n  if (rf & 2) {\n    const field_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"formControlName\", field_r5.name);\n  }\n}\nfunction PCAddEditComponent_div_67_div_5_select_6_option_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r6);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", option_r6, \" \");\n  }\n}\nfunction PCAddEditComponent_div_67_div_5_select_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"select\", 45)(1, \"option\", 10);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, PCAddEditComponent_div_67_div_5_select_6_option_3_Template, 2, 2, \"option\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const field_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"formControlName\", field_r5.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Select \", field_r5.label, \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", field_r5.options);\n  }\n}\nfunction PCAddEditComponent_div_67_div_5_input_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"input\", 46);\n  }\n  if (rf & 2) {\n    const field_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"formControlName\", field_r5.name);\n  }\n}\nfunction PCAddEditComponent_div_67_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, PCAddEditComponent_div_67_div_5_input_3_Template, 1, 1, \"input\", 37)(4, PCAddEditComponent_div_67_div_5_textarea_4_Template, 1, 1, \"textarea\", 38)(5, PCAddEditComponent_div_67_div_5_input_5_Template, 1, 1, \"input\", 39)(6, PCAddEditComponent_div_67_div_5_select_6_Template, 4, 3, \"select\", 40)(7, PCAddEditComponent_div_67_div_5_input_7_Template, 1, 1, \"input\", 41);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const field_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(field_r5.label);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", field_r5.type === \"text\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", field_r5.type === \"textarea\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", field_r5.type === \"number\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", field_r5.type === \"select\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", field_r5.type === \"date\");\n  }\n}\nfunction PCAddEditComponent_div_67_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"h4\");\n    i0.ɵɵtext(3, \"Specifications\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 1);\n    i0.ɵɵtemplate(5, PCAddEditComponent_div_67_div_5_Template, 8, 6, \"div\", 36);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.specificationFields);\n  }\n}\nfunction PCAddEditComponent_div_72_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 50);\n  }\n}\nfunction PCAddEditComponent_div_72_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"button\", 47);\n    i0.ɵɵtemplate(2, PCAddEditComponent_div_72_span_2_Template, 1, 0, \"span\", 48);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"a\", 49);\n    i0.ɵɵtext(5, \"Cancel\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", ctx_r0.loading || !ctx_r0.canSubmit());\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.loading);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.isAddMode ? \"Create PC\" : \"Update PC\", \" \");\n  }\n}\nfunction PCAddEditComponent_div_73_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"a\", 51);\n    i0.ɵɵtext(2, \"Back to List\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let PCAddEditComponent = /*#__PURE__*/(() => {\n  class PCAddEditComponent {\n    constructor(formBuilder, route, router, pcService, itemService, categoryService, stockService, storageLocationService, alertService) {\n      this.formBuilder = formBuilder;\n      this.route = route;\n      this.router = router;\n      this.pcService = pcService;\n      this.itemService = itemService;\n      this.categoryService = categoryService;\n      this.stockService = stockService;\n      this.storageLocationService = storageLocationService;\n      this.alertService = alertService;\n      this.loading = false;\n      this.submitted = false;\n      this.items = [];\n      this.categories = [];\n      this.filteredItems = [];\n      this.selectedCategory = null;\n      this.roomLocations = [];\n      this.specificationFields = [];\n      this.selectedItem = null;\n      this.stocks = [];\n      this.pcs = [];\n      this.availableStock = 0;\n      this.inUseCount = 0;\n      this.totalStock = 0;\n    }\n    ngOnInit() {\n      this.id = this.route.snapshot.params['id'];\n      this.isAddMode = !this.id;\n      this.isViewMode = this.router.url.includes('/view/');\n      this.form = this.formBuilder.group({\n        name: ['', Validators.required],\n        serialNumber: [''],\n        categoryId: ['', Validators.required],\n        itemId: ['', Validators.required],\n        quantity: [1, [Validators.required, Validators.min(1)]],\n        roomLocationId: ['', Validators.required],\n        specifications: [''],\n        status: ['Active', Validators.required],\n        assignedTo: [''],\n        notes: ['']\n      });\n      this.loadCategories();\n      this.loadItems();\n      this.loadStocks();\n      this.loadPCs();\n      this.loadRoomLocations();\n      if (!this.isAddMode) {\n        this.loadPC();\n      }\n      // Disable form in view mode\n      if (this.isViewMode) {\n        this.form.disable();\n      }\n      // Watch quantity changes for validation\n      this.form.get('quantity').valueChanges.subscribe(() => {\n        this.updateQuantityValidation();\n      });\n    }\n    loadCategories() {\n      this.categoryService.getAll().pipe(first()).subscribe(categories => {\n        this.categories = categories;\n      });\n    }\n    loadItems() {\n      this.itemService.getAll().pipe(first()).subscribe(items => {\n        this.items = items;\n      });\n    }\n    loadStocks() {\n      this.stockService.getAll().pipe(first()).subscribe(stocks => {\n        this.stocks = stocks;\n      });\n    }\n    loadPCs() {\n      this.pcService.getAll().pipe(first()).subscribe(pcs => {\n        this.pcs = pcs;\n      });\n    }\n    loadRoomLocations() {\n      this.storageLocationService.getAll().pipe(first()).subscribe(locations => {\n        this.roomLocations = locations;\n      });\n    }\n    onCategoryChange() {\n      const categoryId = this.form.get('categoryId').value;\n      this.selectedCategory = this.categories.find(cat => cat.id === categoryId);\n      if (this.selectedCategory) {\n        // Filter items by selected category\n        this.filteredItems = this.items.filter(item => item.categoryId === categoryId);\n      } else {\n        this.filteredItems = [];\n      }\n      // Reset item selection when category changes\n      this.form.patchValue({\n        itemId: ''\n      });\n      this.selectedItem = null;\n      this.specificationFields = [];\n      this.resetStockInfo();\n    }\n    onItemChange() {\n      const itemId = this.form.get('itemId').value;\n      this.selectedItem = this.items.find(item => item.id === itemId);\n      if (this.selectedItem) {\n        this.loadSpecificationFields(this.selectedItem.categoryId);\n        this.calculateStockInfo(itemId);\n      } else {\n        this.resetStockInfo();\n      }\n    }\n    calculateStockInfo(itemId) {\n      if (!itemId) {\n        this.resetStockInfo();\n        return;\n      }\n      // Get all stock entries for this item\n      const itemStocks = this.stocks.filter(stock => stock.itemId === itemId);\n      // Calculate additions (positive quantities)\n      const additions = itemStocks.filter(stock => !stock.disposeId).reduce((sum, stock) => sum + stock.quantity, 0);\n      // Calculate disposals (negative quantities)\n      const disposals = itemStocks.filter(stock => stock.disposeId).reduce((sum, stock) => sum + stock.quantity, 0);\n      // Calculate in-use (PCs using this item)\n      this.inUseCount = this.getInUseCount(itemId);\n      // Available stock = additions - disposals - in use\n      this.totalStock = additions;\n      this.availableStock = Math.max(0, additions - disposals - this.inUseCount);\n      // Update quantity validation\n      this.updateQuantityValidation();\n    }\n    getInUseCount(itemId) {\n      return this.pcs.filter(pc => pc.itemId === itemId).length;\n    }\n    resetStockInfo() {\n      this.availableStock = 0;\n      this.inUseCount = 0;\n      this.totalStock = 0;\n    }\n    updateQuantityValidation() {\n      const quantityControl = this.form.get('quantity');\n      const currentQuantity = quantityControl.value;\n      if (currentQuantity > this.availableStock) {\n        quantityControl.setErrors({\n          max: true\n        });\n      } else if (quantityControl.hasError('max')) {\n        quantityControl.setErrors(null);\n      }\n    }\n    canSubmit() {\n      if (!this.selectedItem) return false;\n      const quantity = this.form.get('quantity').value;\n      return quantity <= this.availableStock && quantity > 0;\n    }\n    loadPC() {\n      this.pcService.getById(this.id).pipe(first()).subscribe(pc => {\n        this.form.patchValue(pc);\n        this.selectedItem = this.items.find(item => item.id === pc.itemId);\n        if (this.selectedItem) {\n          this.selectedCategory = this.categories.find(cat => cat.id === this.selectedItem.categoryId);\n          this.filteredItems = this.items.filter(item => item.categoryId === this.selectedItem.categoryId);\n          this.loadSpecificationFields(this.selectedItem.categoryId);\n          this.calculateStockInfo(pc.itemId);\n        }\n      });\n    }\n    loadSpecificationFields(categoryId) {\n      this.pcService.getSpecificationFields(categoryId).pipe(first()).subscribe(fields => {\n        this.specificationFields = fields;\n        // Add form controls for specification fields\n        fields.forEach(field => {\n          if (!this.form.contains(field.fieldName)) {\n            this.form.addControl(field.fieldName, this.formBuilder.control(''));\n          }\n        });\n      });\n    }\n    get f() {\n      return this.form.controls;\n    }\n    onSubmit() {\n      this.submitted = true;\n      if (this.form.invalid) {\n        return;\n      }\n      // Check if we have enough stock\n      const quantity = this.form.get('quantity').value;\n      if (quantity > this.availableStock) {\n        this.alertService.error(`Not enough stock available. Only ${this.availableStock} items available.`);\n        return;\n      }\n      this.loading = true;\n      const pc = this.form.value;\n      if (this.isAddMode) {\n        this.createPC(pc);\n      } else {\n        this.updatePC(pc);\n      }\n    }\n    createPC(pc) {\n      this.pcService.create(pc).pipe(first()).subscribe({\n        next: () => {\n          this.alertService.success('PC created successfully', {\n            keepAfterRouteChange: true\n          });\n          this.router.navigate(['../'], {\n            relativeTo: this.route\n          });\n        },\n        error: error => {\n          this.alertService.error(error);\n          this.loading = false;\n        }\n      });\n    }\n    updatePC(pc) {\n      this.pcService.update(this.id, pc).pipe(first()).subscribe({\n        next: () => {\n          this.alertService.success('PC updated successfully', {\n            keepAfterRouteChange: true\n          });\n          this.router.navigate(['../'], {\n            relativeTo: this.route\n          });\n        },\n        error: error => {\n          this.alertService.error(error);\n          this.loading = false;\n        }\n      });\n    }\n    static #_ = this.ɵfac = function PCAddEditComponent_Factory(t) {\n      return new (t || PCAddEditComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.PCService), i0.ɵɵdirectiveInject(i3.ItemService), i0.ɵɵdirectiveInject(i3.CategoryService), i0.ɵɵdirectiveInject(i3.StockService), i0.ɵɵdirectiveInject(i3.StorageLocationService), i0.ɵɵdirectiveInject(i3.AlertService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PCAddEditComponent,\n      selectors: [[\"ng-component\"]],\n      decls: 74,\n      vars: 37,\n      consts: [[1, \"container\"], [1, \"row\"], [1, \"col-12\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"form-group\", \"col-md-6\"], [\"type\", \"text\", \"formControlName\", \"name\", 1, \"form-control\", 3, \"ngClass\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"type\", \"text\", \"formControlName\", \"serialNumber\", 1, \"form-control\"], [1, \"form-group\", \"col-md-4\"], [\"formControlName\", \"categoryId\", 1, \"form-control\", 3, \"change\", \"ngClass\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"formControlName\", \"itemId\", 1, \"form-control\", 3, \"change\", \"ngClass\", \"disabled\"], [\"type\", \"number\", \"formControlName\", \"quantity\", \"min\", \"1\", 1, \"form-control\", 3, \"max\", \"ngClass\"], [\"class\", \"form-text text-muted\", 4, \"ngIf\"], [\"class\", \"row\", 4, \"ngIf\"], [\"formControlName\", \"roomLocationId\", 1, \"form-control\", 3, \"ngClass\"], [\"formControlName\", \"status\", 1, \"form-control\", 3, \"ngClass\"], [\"value\", \"Active\"], [\"value\", \"Inactive\"], [\"value\", \"Maintenance\"], [\"value\", \"Retired\"], [\"type\", \"text\", \"formControlName\", \"assignedTo\", 1, \"form-control\"], [1, \"form-group\"], [\"formControlName\", \"notes\", \"rows\", \"3\", 1, \"form-control\"], [\"class\", \"form-group\", 4, \"ngIf\"], [1, \"invalid-feedback\"], [4, \"ngIf\"], [3, \"value\"], [1, \"form-text\", \"text-muted\"], [1, \"text-success\"], [1, \"card\", \"bg-light\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"fas\", \"fa-boxes\"], [1, \"col-md-3\"], [\"class\", \"form-group col-md-6\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"text\", \"class\", \"form-control\", 3, \"formControlName\", 4, \"ngIf\"], [\"class\", \"form-control\", \"rows\", \"3\", 3, \"formControlName\", 4, \"ngIf\"], [\"type\", \"number\", \"class\", \"form-control\", 3, \"formControlName\", 4, \"ngIf\"], [\"class\", \"form-control\", 3, \"formControlName\", 4, \"ngIf\"], [\"type\", \"date\", \"class\", \"form-control\", 3, \"formControlName\", 4, \"ngIf\"], [\"type\", \"text\", 1, \"form-control\", 3, \"formControlName\"], [\"rows\", \"3\", 1, \"form-control\", 3, \"formControlName\"], [\"type\", \"number\", 1, \"form-control\", 3, \"formControlName\"], [1, \"form-control\", 3, \"formControlName\"], [\"type\", \"date\", 1, \"form-control\", 3, \"formControlName\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"class\", \"spinner-border spinner-border-sm mr-1\", 4, \"ngIf\"], [\"routerLink\", \"../\", 1, \"btn\", \"btn-link\"], [1, \"spinner-border\", \"spinner-border-sm\", \"mr-1\"], [\"routerLink\", \"../\", 1, \"btn\", \"btn-primary\"]],\n      template: function PCAddEditComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h2\");\n          i0.ɵɵtext(4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"form\", 3);\n          i0.ɵɵlistener(\"ngSubmit\", function PCAddEditComponent_Template_form_ngSubmit_5_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(6, \"div\", 1)(7, \"div\", 4)(8, \"label\");\n          i0.ɵɵtext(9, \"Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(10, \"input\", 5);\n          i0.ɵɵtemplate(11, PCAddEditComponent_div_11_Template, 2, 1, \"div\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"div\", 4)(13, \"label\");\n          i0.ɵɵtext(14, \"Serial Number\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(15, \"input\", 7);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(16, \"div\", 1)(17, \"div\", 8)(18, \"label\");\n          i0.ɵɵtext(19, \"Category *\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"select\", 9);\n          i0.ɵɵlistener(\"change\", function PCAddEditComponent_Template_select_change_20_listener() {\n            return ctx.onCategoryChange();\n          });\n          i0.ɵɵelementStart(21, \"option\", 10);\n          i0.ɵɵtext(22, \"Select Category First\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(23, PCAddEditComponent_option_23_Template, 2, 2, \"option\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(24, PCAddEditComponent_div_24_Template, 2, 1, \"div\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"div\", 8)(26, \"label\");\n          i0.ɵɵtext(27, \"Item *\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(28, \"select\", 12);\n          i0.ɵɵlistener(\"change\", function PCAddEditComponent_Template_select_change_28_listener() {\n            return ctx.onItemChange();\n          });\n          i0.ɵɵelementStart(29, \"option\", 10);\n          i0.ɵɵtext(30);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(31, PCAddEditComponent_option_31_Template, 2, 3, \"option\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(32, PCAddEditComponent_div_32_Template, 2, 1, \"div\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(33, \"div\", 8)(34, \"label\");\n          i0.ɵɵtext(35, \"Quantity *\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(36, \"input\", 13);\n          i0.ɵɵtemplate(37, PCAddEditComponent_div_37_Template, 4, 3, \"div\", 6)(38, PCAddEditComponent_small_38_Template, 4, 1, \"small\", 14);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(39, PCAddEditComponent_div_39_Template, 24, 4, \"div\", 15);\n          i0.ɵɵelementStart(40, \"div\", 1)(41, \"div\", 4)(42, \"label\");\n          i0.ɵɵtext(43, \"Room Location\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(44, \"select\", 16)(45, \"option\", 10);\n          i0.ɵɵtext(46, \"Select Room Location\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(47, PCAddEditComponent_option_47_Template, 2, 2, \"option\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(48, PCAddEditComponent_div_48_Template, 2, 1, \"div\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(49, \"div\", 4)(50, \"label\");\n          i0.ɵɵtext(51, \"Status\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(52, \"select\", 17)(53, \"option\", 18);\n          i0.ɵɵtext(54, \"Active\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(55, \"option\", 19);\n          i0.ɵɵtext(56, \"Inactive\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(57, \"option\", 20);\n          i0.ɵɵtext(58, \"Maintenance\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(59, \"option\", 21);\n          i0.ɵɵtext(60, \"Retired\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(61, PCAddEditComponent_div_61_Template, 2, 1, \"div\", 6);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(62, \"div\", 1)(63, \"div\", 4)(64, \"label\");\n          i0.ɵɵtext(65, \"Assigned To\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(66, \"input\", 22);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(67, PCAddEditComponent_div_67_Template, 6, 1, \"div\", 15);\n          i0.ɵɵelementStart(68, \"div\", 23)(69, \"label\");\n          i0.ɵɵtext(70, \"Notes\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(71, \"textarea\", 24);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(72, PCAddEditComponent_div_72_Template, 6, 3, \"div\", 25)(73, PCAddEditComponent_div_73_Template, 3, 0, \"div\", 25);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate(ctx.isAddMode ? \"Add PC\" : ctx.isViewMode ? \"View PC\" : \"Edit PC\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"formGroup\", ctx.form);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(25, _c0, ctx.submitted && ctx.f.name.errors));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.submitted && ctx.f.name.errors);\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(27, _c0, ctx.submitted && ctx.f.categoryId.errors));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.submitted && ctx.f.categoryId.errors);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(29, _c0, ctx.submitted && ctx.f.itemId.errors))(\"disabled\", !ctx.selectedCategory);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.selectedCategory ? \"Select Item\" : \"Select Category First\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngForOf\", ctx.filteredItems);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.submitted && ctx.f.itemId.errors);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"max\", ctx.availableStock)(\"ngClass\", i0.ɵɵpureFunction1(31, _c0, ctx.submitted && ctx.f.quantity.errors));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.submitted && ctx.f.quantity.errors);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedItem);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedItem && ctx.availableStock > 0);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(33, _c0, ctx.submitted && ctx.f.roomLocationId.errors));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.roomLocations);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.submitted && ctx.f.roomLocationId.errors);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(35, _c0, ctx.submitted && ctx.f.status.errors));\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"ngIf\", ctx.submitted && ctx.f.status.errors);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.specificationFields.length > 0);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", !ctx.isViewMode);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isViewMode);\n        }\n      },\n      dependencies: [i4.NgClass, i4.NgForOf, i4.NgIf, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.MinValidator, i1.MaxValidator, i1.FormGroupDirective, i1.FormControlName, i2.RouterLink],\n      encapsulation: 2\n    });\n  }\n  return PCAddEditComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}