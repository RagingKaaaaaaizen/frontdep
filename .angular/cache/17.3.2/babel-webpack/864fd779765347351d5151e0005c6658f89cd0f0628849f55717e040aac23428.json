{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { first } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../_services\";\nimport * as i4 from \"@angular/common\";\nconst _c0 = a0 => ({\n  \"is-invalid\": a0\n});\nfunction PCAddEditComponent_option_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const location_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", location_r1.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", location_r1.name, \" \");\n  }\n}\nfunction PCAddEditComponent_div_21_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Room Location is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PCAddEditComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtemplate(1, PCAddEditComponent_div_21_div_1_Template, 2, 0, \"div\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.f.roomLocationId.errors.required);\n  }\n}\nfunction PCAddEditComponent_div_22_div_13_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"PC Name is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PCAddEditComponent_div_22_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtemplate(1, PCAddEditComponent_div_22_div_13_div_1_Template, 2, 0, \"div\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.f.name.errors.required);\n  }\n}\nfunction PCAddEditComponent_div_22_div_31_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Status is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PCAddEditComponent_div_22_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtemplate(1, PCAddEditComponent_div_22_div_31_div_1_Template, 2, 0, \"div\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.f.status.errors.required);\n  }\n}\nfunction PCAddEditComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"div\", 4)(3, \"div\", 5)(4, \"h5\");\n    i0.ɵɵelement(5, \"i\", 18);\n    i0.ɵɵtext(6, \" Step 2: PC Information\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 7)(8, \"div\", 1)(9, \"div\", 19)(10, \"label\");\n    i0.ɵɵtext(11, \"PC Name *\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 20);\n    i0.ɵɵtemplate(13, PCAddEditComponent_div_22_div_13_Template, 2, 1, \"div\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 19)(15, \"label\");\n    i0.ɵɵtext(16, \"Serial Number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(17, \"input\", 21);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"div\", 1)(19, \"div\", 19)(20, \"label\");\n    i0.ɵɵtext(21, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"select\", 22)(23, \"option\", 23);\n    i0.ɵɵtext(24, \"Active\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"option\", 24);\n    i0.ɵɵtext(26, \"Inactive\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"option\", 25);\n    i0.ɵɵtext(28, \"Maintenance\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"option\", 26);\n    i0.ɵɵtext(30, \"Retired\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(31, PCAddEditComponent_div_22_div_31_Template, 2, 1, \"div\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"div\", 19)(33, \"label\");\n    i0.ɵɵtext(34, \"Assigned To\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(35, \"input\", 27);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(36, \"div\", 8)(37, \"label\");\n    i0.ɵɵtext(38, \"Notes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(39, \"textarea\", 28);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(4, _c0, ctx_r1.submitted && ctx_r1.f.name.errors));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.submitted && ctx_r1.f.name.errors);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(6, _c0, ctx_r1.submitted && ctx_r1.f.status.errors));\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.submitted && ctx_r1.f.status.errors);\n  }\n}\nfunction PCAddEditComponent_div_23_div_12_option_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", category_r7.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", category_r7.name, \" \");\n  }\n}\nfunction PCAddEditComponent_div_23_div_12_option_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r8.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", item_r8.name, \" \");\n  }\n}\nfunction PCAddEditComponent_div_23_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 34)(1, \"div\", 1)(2, \"div\", 35)(3, \"label\");\n    i0.ɵɵtext(4, \"Category\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"select\", 36);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function PCAddEditComponent_div_23_div_12_Template_select_ngModelChange_5_listener($event) {\n      const stockItem_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      i0.ɵɵtwoWayBindingSet(stockItem_r5.categoryId, $event) || (stockItem_r5.categoryId = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"change\", function PCAddEditComponent_div_23_div_12_Template_select_change_5_listener() {\n      const i_r6 = i0.ɵɵrestoreView(_r4).index;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.onStockCategoryChange(i_r6));\n    });\n    i0.ɵɵelementStart(6, \"option\", 10);\n    i0.ɵɵtext(7, \"Select Category\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, PCAddEditComponent_div_23_div_12_option_8_Template, 2, 2, \"option\", 11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 35)(10, \"label\");\n    i0.ɵɵtext(11, \"Item\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"select\", 37);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function PCAddEditComponent_div_23_div_12_Template_select_ngModelChange_12_listener($event) {\n      const stockItem_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      i0.ɵɵtwoWayBindingSet(stockItem_r5.itemId, $event) || (stockItem_r5.itemId = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementStart(13, \"option\", 10);\n    i0.ɵɵtext(14, \"Select Item\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, PCAddEditComponent_div_23_div_12_option_15_Template, 2, 2, \"option\", 11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 38)(17, \"label\");\n    i0.ɵɵtext(18, \"Quantity\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"input\", 39);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function PCAddEditComponent_div_23_div_12_Template_input_ngModelChange_19_listener($event) {\n      const stockItem_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      i0.ɵɵtwoWayBindingSet(stockItem_r5.quantity, $event) || (stockItem_r5.quantity = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\", 38)(21, \"label\");\n    i0.ɵɵtext(22, \"Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"input\", 40);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function PCAddEditComponent_div_23_div_12_Template_input_ngModelChange_23_listener($event) {\n      const stockItem_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      i0.ɵɵtwoWayBindingSet(stockItem_r5.price, $event) || (stockItem_r5.price = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"div\", 38)(25, \"label\");\n    i0.ɵɵtext(26, \"Actions\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"button\", 41);\n    i0.ɵɵlistener(\"click\", function PCAddEditComponent_div_23_div_12_Template_button_click_27_listener() {\n      const i_r6 = i0.ɵɵrestoreView(_r4).index;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.removeStockItem(i_r6));\n    });\n    i0.ɵɵelement(28, \"i\", 42);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const stockItem_r5 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtwoWayProperty(\"ngModel\", stockItem_r5.categoryId);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.categories);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", stockItem_r5.itemId);\n    i0.ɵɵproperty(\"disabled\", !stockItem_r5.categoryId);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.getFilteredItems(stockItem_r5.categoryId));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", stockItem_r5.quantity);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", stockItem_r5.price);\n  }\n}\nfunction PCAddEditComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"div\", 4)(3, \"div\", 5)(4, \"h5\");\n    i0.ɵɵelement(5, \"i\", 29);\n    i0.ɵɵtext(6, \" Step 3: Add Items to Stock\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function PCAddEditComponent_div_23_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.addStockItem());\n    });\n    i0.ɵɵelement(8, \"i\", 31);\n    i0.ɵɵtext(9, \" Add Item \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 7)(11, \"div\", 32);\n    i0.ɵɵtemplate(12, PCAddEditComponent_div_23_div_12_Template, 29, 7, \"div\", 33);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.stockItems);\n  }\n}\nfunction PCAddEditComponent_div_24_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 46);\n  }\n}\nfunction PCAddEditComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"button\", 43);\n    i0.ɵɵtemplate(2, PCAddEditComponent_div_24_span_2_Template, 1, 0, \"span\", 44);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"a\", 45);\n    i0.ɵɵtext(5, \"Cancel\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", ctx_r1.loading || !ctx_r1.canSubmit());\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.loading);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.isAddMode ? \"Create PC\" : \"Update PC\", \" \");\n  }\n}\nfunction PCAddEditComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"a\", 47);\n    i0.ɵɵtext(2, \"Back to List\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let PCAddEditComponent = /*#__PURE__*/(() => {\n  class PCAddEditComponent {\n    constructor(formBuilder, route, router, pcService, itemService, categoryService, stockService, storageLocationService, alertService) {\n      this.formBuilder = formBuilder;\n      this.route = route;\n      this.router = router;\n      this.pcService = pcService;\n      this.itemService = itemService;\n      this.categoryService = categoryService;\n      this.stockService = stockService;\n      this.storageLocationService = storageLocationService;\n      this.alertService = alertService;\n      this.loading = false;\n      this.submitted = false;\n      this.items = [];\n      this.categories = [];\n      this.filteredItems = [];\n      this.selectedCategory = null;\n      this.roomLocations = [];\n      this.specificationFields = [];\n      this.selectedItem = null;\n      this.stocks = [];\n      this.pcs = [];\n      this.availableStock = 0;\n      this.inUseCount = 0;\n      this.totalStock = 0;\n    }\n    ngOnInit() {\n      this.id = this.route.snapshot.params['id'];\n      this.isAddMode = !this.id;\n      this.isViewMode = this.router.url.includes('/view/');\n      this.form = this.formBuilder.group({\n        name: ['', Validators.required],\n        serialNumber: [''],\n        categoryId: ['', Validators.required],\n        itemId: ['', Validators.required],\n        quantity: [1, [Validators.required, Validators.min(1)]],\n        roomLocationId: ['', Validators.required],\n        specifications: [''],\n        status: ['Active', Validators.required],\n        assignedTo: [''],\n        notes: ['']\n      });\n      this.loadCategories();\n      this.loadItems();\n      this.loadStocks();\n      this.loadPCs();\n      this.loadRoomLocations();\n      if (!this.isAddMode) {\n        this.loadPC();\n      }\n      // Disable form in view mode\n      if (this.isViewMode) {\n        this.form.disable();\n      }\n      // Watch quantity changes for validation\n      this.form.get('quantity').valueChanges.subscribe(() => {\n        this.updateQuantityValidation();\n      });\n    }\n    loadCategories() {\n      this.categoryService.getAll().pipe(first()).subscribe(categories => {\n        this.categories = categories;\n      });\n    }\n    loadItems() {\n      this.itemService.getAll().pipe(first()).subscribe(items => {\n        this.items = items;\n      });\n    }\n    loadStocks() {\n      this.stockService.getAll().pipe(first()).subscribe(stocks => {\n        this.stocks = stocks;\n      });\n    }\n    loadPCs() {\n      this.pcService.getAll().pipe(first()).subscribe(pcs => {\n        this.pcs = pcs;\n      });\n    }\n    loadRoomLocations() {\n      this.storageLocationService.getAll().pipe(first()).subscribe(locations => {\n        this.roomLocations = locations;\n      });\n    }\n    onCategoryChange() {\n      const categoryId = this.form.get('categoryId').value;\n      this.selectedCategory = this.categories.find(cat => cat.id === categoryId);\n      if (this.selectedCategory) {\n        // Filter items by selected category\n        this.filteredItems = this.items.filter(item => item.categoryId === categoryId);\n      } else {\n        this.filteredItems = [];\n      }\n      // Reset item selection when category changes\n      this.form.patchValue({\n        itemId: ''\n      });\n      this.selectedItem = null;\n      this.specificationFields = [];\n      this.resetStockInfo();\n    }\n    onItemChange() {\n      const itemId = this.form.get('itemId').value;\n      this.selectedItem = this.items.find(item => item.id === itemId);\n      if (this.selectedItem) {\n        this.loadSpecificationFields(this.selectedItem.categoryId);\n        this.calculateStockInfo(itemId);\n      } else {\n        this.resetStockInfo();\n      }\n    }\n    calculateStockInfo(itemId) {\n      if (!itemId) {\n        this.resetStockInfo();\n        return;\n      }\n      // Get all stock entries for this item\n      const itemStocks = this.stocks.filter(stock => stock.itemId === itemId);\n      // Calculate additions (positive quantities)\n      const additions = itemStocks.filter(stock => !stock.disposeId).reduce((sum, stock) => sum + stock.quantity, 0);\n      // Calculate disposals (negative quantities)\n      const disposals = itemStocks.filter(stock => stock.disposeId).reduce((sum, stock) => sum + stock.quantity, 0);\n      // Calculate in-use (PCs using this item)\n      this.inUseCount = this.getInUseCount(itemId);\n      // Available stock = additions - disposals - in use\n      this.totalStock = additions;\n      this.availableStock = Math.max(0, additions - disposals - this.inUseCount);\n      // Update quantity validation\n      this.updateQuantityValidation();\n    }\n    getInUseCount(itemId) {\n      return this.pcs.filter(pc => pc.itemId === itemId && pc.status === 'Active').reduce((sum, pc) => sum + (pc.quantity || 1), 0);\n    }\n    resetStockInfo() {\n      this.availableStock = 0;\n      this.inUseCount = 0;\n      this.totalStock = 0;\n    }\n    updateQuantityValidation() {\n      const quantityControl = this.form.get('quantity');\n      const currentQuantity = quantityControl.value;\n      if (currentQuantity > this.availableStock) {\n        quantityControl.setErrors({\n          max: true\n        });\n      } else if (quantityControl.hasError('max')) {\n        quantityControl.setErrors(null);\n      }\n    }\n    canSubmit() {\n      if (!this.selectedItem) return false;\n      const quantity = this.form.get('quantity').value;\n      return quantity <= this.availableStock && quantity > 0;\n    }\n    loadPC() {\n      this.pcService.getById(this.id).pipe(first()).subscribe(pc => {\n        this.form.patchValue(pc);\n        this.selectedItem = this.items.find(item => item.id === pc.itemId);\n        if (this.selectedItem) {\n          this.selectedCategory = this.categories.find(cat => cat.id === this.selectedItem.categoryId);\n          this.filteredItems = this.items.filter(item => item.categoryId === this.selectedItem.categoryId);\n          this.loadSpecificationFields(this.selectedItem.categoryId);\n          this.calculateStockInfo(pc.itemId);\n        }\n      });\n    }\n    loadSpecificationFields(categoryId) {\n      this.pcService.getSpecificationFields(categoryId).pipe(first()).subscribe(fields => {\n        this.specificationFields = fields;\n        // Add form controls for specification fields\n        fields.forEach(field => {\n          if (!this.form.contains(field.fieldName)) {\n            this.form.addControl(field.fieldName, this.formBuilder.control(''));\n          }\n        });\n      });\n    }\n    get f() {\n      return this.form.controls;\n    }\n    onSubmit() {\n      this.submitted = true;\n      if (this.form.invalid) {\n        return;\n      }\n      // Check if we have enough stock\n      const quantity = this.form.get('quantity').value;\n      if (quantity > this.availableStock) {\n        this.alertService.error(`Not enough stock available. Only ${this.availableStock} items available.`);\n        return;\n      }\n      this.loading = true;\n      const pc = this.form.value;\n      if (this.isAddMode) {\n        this.createPC(pc);\n      } else {\n        this.updatePC(pc);\n      }\n    }\n    createPC(pc) {\n      this.pcService.create(pc).pipe(first()).subscribe({\n        next: () => {\n          this.alertService.success('PC created successfully', {\n            keepAfterRouteChange: true\n          });\n          this.router.navigate(['../'], {\n            relativeTo: this.route\n          });\n        },\n        error: error => {\n          this.alertService.error(error);\n          this.loading = false;\n        }\n      });\n    }\n    updatePC(pc) {\n      this.pcService.update(this.id, pc).pipe(first()).subscribe({\n        next: () => {\n          this.alertService.success('PC updated successfully', {\n            keepAfterRouteChange: true\n          });\n          this.router.navigate(['../'], {\n            relativeTo: this.route\n          });\n        },\n        error: error => {\n          this.alertService.error(error);\n          this.loading = false;\n        }\n      });\n    }\n    static #_ = this.ɵfac = function PCAddEditComponent_Factory(t) {\n      return new (t || PCAddEditComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.PCService), i0.ɵɵdirectiveInject(i3.ItemService), i0.ɵɵdirectiveInject(i3.CategoryService), i0.ɵɵdirectiveInject(i3.StockService), i0.ɵɵdirectiveInject(i3.StorageLocationService), i0.ɵɵdirectiveInject(i3.AlertService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PCAddEditComponent,\n      selectors: [[\"ng-component\"]],\n      decls: 26,\n      vars: 11,\n      consts: [[1, \"container\"], [1, \"row\"], [1, \"col-12\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"card\"], [1, \"card-header\"], [1, \"fas\", \"fa-map-marker-alt\"], [1, \"card-body\"], [1, \"form-group\"], [\"formControlName\", \"roomLocationId\", 1, \"form-control\", 3, \"change\", \"ngClass\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"class\", \"row\", 4, \"ngIf\"], [\"class\", \"form-group\", 4, \"ngIf\"], [3, \"value\"], [1, \"invalid-feedback\"], [4, \"ngIf\"], [1, \"fas\", \"fa-desktop\"], [1, \"form-group\", \"col-md-6\"], [\"type\", \"text\", \"formControlName\", \"name\", 1, \"form-control\", 3, \"ngClass\"], [\"type\", \"text\", \"formControlName\", \"serialNumber\", 1, \"form-control\"], [\"formControlName\", \"status\", 1, \"form-control\", 3, \"ngClass\"], [\"value\", \"Active\"], [\"value\", \"Inactive\"], [\"value\", \"Maintenance\"], [\"value\", \"Retired\"], [\"type\", \"text\", \"formControlName\", \"assignedTo\", 1, \"form-control\"], [\"formControlName\", \"notes\", \"rows\", \"3\", 1, \"form-control\"], [1, \"fas\", \"fa-boxes\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-primary\", 3, \"click\"], [1, \"fas\", \"fa-plus\"], [1, \"stock-items-container\"], [\"class\", \"stock-item-row\", 4, \"ngFor\", \"ngForOf\"], [1, \"stock-item-row\"], [1, \"col-md-3\"], [1, \"form-control\", 3, \"ngModelChange\", \"change\", \"ngModel\"], [1, \"form-control\", 3, \"ngModelChange\", \"ngModel\", \"disabled\"], [1, \"col-md-2\"], [\"type\", \"number\", \"min\", \"1\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"number\", \"min\", \"0\", \"step\", \"0.01\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-danger\", 3, \"click\"], [1, \"fas\", \"fa-trash\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"class\", \"spinner-border spinner-border-sm mr-1\", 4, \"ngIf\"], [\"routerLink\", \"../\", 1, \"btn\", \"btn-link\"], [1, \"spinner-border\", \"spinner-border-sm\", \"mr-1\"], [\"routerLink\", \"../\", 1, \"btn\", \"btn-primary\"]],\n      template: function PCAddEditComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h2\");\n          i0.ɵɵtext(4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"form\", 3);\n          i0.ɵɵlistener(\"ngSubmit\", function PCAddEditComponent_Template_form_ngSubmit_5_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(6, \"div\", 1)(7, \"div\", 2)(8, \"div\", 4)(9, \"div\", 5)(10, \"h5\");\n          i0.ɵɵelement(11, \"i\", 6);\n          i0.ɵɵtext(12, \" Step 1: Select Location\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(13, \"div\", 7)(14, \"div\", 8)(15, \"label\");\n          i0.ɵɵtext(16, \"Room Location *\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"select\", 9);\n          i0.ɵɵlistener(\"change\", function PCAddEditComponent_Template_select_change_17_listener() {\n            return ctx.onLocationChange();\n          });\n          i0.ɵɵelementStart(18, \"option\", 10);\n          i0.ɵɵtext(19, \"Select Room Location\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(20, PCAddEditComponent_option_20_Template, 2, 2, \"option\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(21, PCAddEditComponent_div_21_Template, 2, 1, \"div\", 12);\n          i0.ɵɵelementEnd()()()()();\n          i0.ɵɵtemplate(22, PCAddEditComponent_div_22_Template, 40, 8, \"div\", 13)(23, PCAddEditComponent_div_23_Template, 13, 1, \"div\", 13)(24, PCAddEditComponent_div_24_Template, 6, 3, \"div\", 14)(25, PCAddEditComponent_div_25_Template, 3, 0, \"div\", 14);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate(ctx.isAddMode ? \"Add PC\" : ctx.isViewMode ? \"View PC\" : \"Edit PC\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"formGroup\", ctx.form);\n          i0.ɵɵadvance(12);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(9, _c0, ctx.submitted && ctx.f.roomLocationId.errors));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.roomLocations);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.submitted && ctx.f.roomLocationId.errors);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedLocation);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedLocation && !ctx.isViewMode);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.isViewMode);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isViewMode);\n        }\n      },\n      dependencies: [i4.NgClass, i4.NgForOf, i4.NgIf, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.MinValidator, i1.FormGroupDirective, i1.FormControlName, i1.NgModel, i2.RouterLink],\n      encapsulation: 2\n    });\n  }\n  return PCAddEditComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}